<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./style.css" />
    <script
      type="module"
      src="https://cdn.jsdelivr.net/gh/starfederation/datastar@v1.0.0-beta.10/bundles/datastar.js"
    ></script>
    <title>Datastar Test</title>
  </head>
  <body>
    <h1>Datastar Test</h1>
    <p>Using server-sent events</p>
    <fieldset>
      <legend>CLIENT: Update signal</legend>
      <input type="text" data-bind-input />
      <div data-show="$input !== ''" data-text="`Input value: ${$input}`"></div>
      <button data-on-click="$input = 'clicked!'">
        Click to update input value
      </button>
      <button data-on-click="$input = ''" data-show="$input !== ''">
        Clear input
      </button>
    </fieldset>

    <fieldset>
      <legend>SERVER: Get time from server</legend>
      <div id="time">no time yet from server</div>
      <button data-on-click="@get('/time')">Click to get server time</button>
    </fieldset>

    <fieldset>
      <legend>SERVER: Get random quote from server</legend>
      <button
        data-on-click="@get('/quote')"
        data-indicator-fetching
        class="flex-d items-center gap-4"
      >
        <span>Get a random quote from server</span>
        <img
          data-class-loading="$fetching"
          class="indicator"
          src="./images/line-md--loading-twotone-loop.svg"
          alt="Loading..."
        />
      </button>
      <div data-text="`fetching state = ${$fetching}`">fetching value here</div>
      <div id="quote" data-on-load="@get('/quote')" data-indicator-fetching>
        Getting new quote from server...
      </div>
    </fieldset>
  </body>
</html>
